<script lang="ts">
	import { onMount } from "svelte";
    import { sectionIndex } from "$lib/stores";
    import { page } from "$app/stores"

    let divStyle = "text-blue-900 bg-white border-b-2 border-blue-800"
    let svgFill = "#1e3a8a"
    let textColor = "text-blue-800"

    $: if (($sectionIndex === 2) && ($page.url.pathname.length == 1)) {
        divStyle = "text-white border-b-2 border-white"
        svgFill = "#ffffff"
        textColor = "text-white"
    }
    
    onMount(async () => {
        let home = document.getElementById('home');
        home?.addEventListener('scroll', (e) => {
            // @ts-ignore
            $sectionIndex = Math.floor((e.target.scrollTop+150) / window.innerHeight);
        });
        $sectionIndex = Math.floor((window.scrollY+150) / window.innerHeight);
    });
</script>

<header class="fixed inset-0 z-[88] h-10 w-full">
    <div class={"flex justify-between items-center pt-4 px-2 md:px-8 max-w-5xl mx-auto w-full backdrop-blur-sm bg-opacity-20" + divStyle}>
        <div class={`hover:scale-105 ${textColor}`}>
            <a href="/" class="font-mono">basedtrade.io</a>
        </div>
        <div class={`flex flex-row gap-4 md:gap-8 font-mono font-thin ${textColor} pr-0 md:pr-10`}>
            <a href="/trade" class="hover:underline">
                trade
            </a>
            <a href="/bridge" class="hover:underline">
                bridge
            </a>
        </div>
        <ul class="flex flex-row h-full gap-4 md:gap-4 justify-center align-middle content-center">
            <!-- <li class="flex my-auto">
                <a 
                    href="/trade"
                    class=""
                >
                    <svg 
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 50 50"
                        width="28px" height="28px"
                        style={`color: ${svgFill}; fill: ${svgFill};`}
                    >
                        <path d="M 16 0 C 7.178 0 0 7.178 0 16 C 0 24.822 7.178 32 16 32 C 16.041 32 16.076187 31.996094 16.117188 31.996094 C 17.041187 23.657094 23.657094 17.041187 31.996094 16.117188 C 31.996094 16.076187 32 16.041 32 16 C 32 7.178 24.822 0 16 0 z M 39.292969 0.29296875 L 33.585938 6 L 39.292969 11.707031 L 40.707031 10.292969 L 37.414062 7 L 42 7 C 44.754545 7 47 9.2454545 47 12 L 47 18 L 49 18 L 49 12 C 49 8.1545455 45.845455 5 42 5 L 37.414062 5 L 40.707031 1.7070312 L 39.292969 0.29296875 z M 16 4 C 16.552 4 17 4.448 17 5 L 17 6.734375 C 18.108 6.871375 19.040219 7.341 19.699219 8 C 20.399219 8.7 20.899219 9.7996094 21.199219 11.099609 L 19.300781 11.099609 C 19.015781 9.6746094 18.273 8.8876875 17 8.5546875 L 17 14.0625 L 18.099609 14.400391 C 18.399609 14.500391 18.699609 14.600781 19.099609 14.800781 C 19.499609 15.000781 19.900781 15.199609 20.300781 15.599609 C 20.700781 15.899609 20.999219 16.300781 21.199219 16.800781 C 21.499219 17.300781 21.599609 17.899609 21.599609 18.599609 C 21.599609 19.299609 21.499219 20 21.199219 20.5 C 20.999219 21.1 20.599219 21.6 20.199219 22 C 19.799219 22.4 19.299219 22.7 18.699219 23 C 18.179219 23.173 17.651 23.339812 17 23.382812 L 17 25 C 17 25.552 16.552 26 16 26 C 15.448 26 15 25.552 15 25 L 15 23.322266 C 13.739 23.133266 12.706 22.595781 12 21.800781 C 11.1 20.900781 10.6 19.699609 10.5 18.099609 L 12.400391 18.099609 C 12.300391 19.199609 12.699219 20 13.199219 20.5 C 13.705219 21.006 14.291 21.293188 15 21.492188 L 15 15.595703 C 14.369 15.429703 13.814391 15.265609 13.400391 15.099609 C 12.800391 14.899609 12.4 14.598828 12 14.298828 C 11.6 13.998828 11.299219 13.599609 11.199219 13.099609 C 10.999219 12.599609 10.900391 12.098437 10.900391 11.398438 C 10.900391 10.698438 11.000781 10.099609 11.300781 9.5996094 C 11.500781 8.9996094 11.900781 8.5996094 12.300781 8.0996094 C 12.700781 7.6996094 13.200781 7.3996094 13.800781 7.0996094 C 14.200781 6.9666094 14.6 6.8376719 15 6.7636719 L 15 5 C 15 4.448 15.448 4 16 4 z M 15 8.6347656 C 14.506 8.7057656 13.991609 8.9087813 13.599609 9.3007812 C 13.099609 9.7007813 12.900391 10.399219 12.900391 11.199219 C 12.900391 11.599219 12.999609 11.899219 13.099609 12.199219 C 13.199609 12.499219 13.399609 12.700391 13.599609 12.900391 C 13.799609 13.100391 14.100391 13.200391 14.400391 13.400391 C 14.580391 13.460391 14.791 13.551625 15 13.640625 L 15 8.6347656 z M 17 16.208984 L 17 21.623047 C 17.293 21.548047 17.577781 21.474391 17.800781 21.400391 C 18.100781 21.300391 18.499219 21.100391 18.699219 20.900391 C 18.999219 20.700391 19.200781 20.4 19.300781 20 C 19.400781 19.7 19.5 19.200781 19.5 18.800781 C 19.5 18.400781 19.400781 17.999219 19.300781 17.699219 C 19.200781 17.399219 18.999219 17.2 18.699219 17 C 18.399219 16.8 18.100781 16.6 17.800781 16.5 C 17.509781 16.427 17.262 16.310984 17 16.208984 z M 34 18 C 25.178 18 18 25.178 18 34 C 18 42.822 25.178 50 34 50 C 42.822 50 50 42.822 50 34 C 50 25.178 42.822 18 34 18 z M 33 23.857422 L 33 35.675781 L 27.484375 34.099609 L 33 23.857422 z M 35 23.857422 L 40.515625 34.099609 L 35 35.675781 L 35 23.857422 z M 1 32 L 1 38 C 1 41.845455 4.1545455 45 8 45 L 11.585938 45 L 8.2929688 48.292969 L 9.7070312 49.707031 L 15.414062 44 L 9.7070312 38.292969 L 8.2929688 39.707031 L 11.585938 43 L 8 43 C 5.2454545 43 3 40.754545 3 38 L 3 32 L 1 32 z M 27.808594 36.271484 L 33 37.753906 L 33 38.042969 L 33 44.427734 L 27.808594 36.271484 z M 40.191406 36.271484 L 35 44.427734 L 35 38.042969 L 35 37.753906 L 40.191406 36.271484 z"/>
                    </svg>
                </a>
            </li>
            <li class="flex my-auto">
                <a href="/bridge" class="">
                    <svg style={`color: ${svgFill}; fill: ${svgFill}`} width="42px" height="42px" viewBox="0 -35.58 122.88 122.88" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <style type="text/css">.st0{fill-rule:evenodd;clip-rule:evenodd;}</style> <g> <path class="st0" d="M16.55,3.48c0.57-4.79,7.86-4.47,7.86,0v1.01c5.29,10.8,15.2,16.77,26.06,19c5.66,1.17,11.59,1.32,17.27,0.63 c5.67-0.69,11.08-2.23,15.7-4.46c7.2-3.47,12.5-8.59,13.91-14.73V3.48c0.57-4.79,7.86-4.47,7.86,0v2.4 c2.18,4.3,5.17,7.74,8.52,10.51c2.87,2.37,6.01,4.28,9.15,5.83v2.98c-1.16-0.55-2.33-1.13-3.48-1.77v9.1h3.48v4.59h-17.67v14.62 h-7.86V37.11H24.41v14.62h-7.86V37.11H0v-4.59h2.91v-9.4C1.95,23.67,0.97,24.18,0,24.67v-3.01c2.75-1.45,5.47-3.17,7.97-5.26 c3.39-2.84,6.39-6.36,8.58-10.79V3.48L16.55,3.48z M66.73,26.93v5.59h-2.69v-5.38c-2.04,0.11-4.09,0.11-6.15,0v5.38h-2.69v-5.6 c-1.77-0.18-3.53-0.45-5.27-0.81c-0.32-0.07-0.64-0.13-0.95-0.21v6.61h-2.69v-7.3c-2.11-0.6-4.16-1.35-6.15-2.25v9.55h-2.69V21.64 c-2.2-1.19-4.29-2.59-6.22-4.2v15.08h-2.69V14.96c-1.51-1.54-2.9-3.24-4.14-5.1v22.67h72.95V11.58c-1.08,1.66-2.41,3.21-3.96,4.65 v16.29H90.7V18.44c-1.84,1.35-3.89,2.57-6.09,3.63l-0.13,0.06v10.39h-2.69v-9.2c-1.96,0.79-4.02,1.47-6.15,2.03v7.18h-2.69v-6.54 c-1.6,0.34-3.24,0.61-4.89,0.81C67.62,26.84,67.18,26.89,66.73,26.93L66.73,26.93z M111.88,18.34v14.19h4.83V21.84 c-1.61-1.01-3.18-2.14-4.69-3.39L111.88,18.34L111.88,18.34z M109.19,32.53V15.87c-1.43-1.45-2.77-3.03-3.98-4.78v21.43H109.19 L109.19,32.53z M13.11,15.21v17.32h3.44V10.91C15.5,12.47,14.34,13.89,13.11,15.21L13.11,15.21z M10.42,32.53V17.82 c-0.24,0.21-0.49,0.43-0.74,0.63C8.37,19.55,7,20.56,5.6,21.48v11.05H10.42L10.42,32.53z"></path> </g> </g></svg>
                </a>
            </li> -->
            <li class="flex my-auto">
                <a 
                    href="https://twitter.com/basedtrade_io" 
                    target="_blank"
                    class=""
                >
                    <svg
                        data-testid="geist-icon"
                        fill="none"
                        shape-rendering="geometricPrecision"
                        stroke="currentColor"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="1.5"
                        viewBox="0 0 24 24"
                        height="24"
                        width="24"
                        style={`color: ${svgFill};`}
                    >   
                        <path d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z"/>
                    </svg>
                </a>
            </li>
            <li class="flex my-auto font-semibold">
                <a 
                    href="https://discord.gg/TapaG4Zf" 
                    target="_blank"
                    class=""
                >
                   <svg fill={svgFill} width="28" height="28" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M 12.65625 4.90625 L 11.875 5 C 11.875 5 8.371094 5.382813 5.8125 7.4375 L 5.78125 7.4375 L 5.75 7.46875 C 5.175781 7.996094 4.925781 8.644531 4.53125 9.59375 C 4.136719 10.542969 3.714844 11.753906 3.34375 13.09375 C 2.601563 15.777344 2 19.027344 2 22 L 2 22.25 L 2.125 22.5 C 3.050781 24.125 4.695313 25.160156 6.21875 25.875 C 7.742188 26.589844 9.058594 26.96875 9.96875 27 L 10.5625 27.03125 L 10.875 26.5 L 11.96875 24.5625 C 13.128906 24.824219 14.464844 25 16 25 C 17.535156 25 18.871094 24.824219 20.03125 24.5625 L 21.125 26.5 L 21.4375 27.03125 L 22.03125 27 C 22.941406 26.96875 24.257813 26.589844 25.78125 25.875 C 27.304688 25.160156 28.949219 24.125 29.875 22.5 L 30 22.25 L 30 22 C 30 19.027344 29.398438 15.777344 28.65625 13.09375 C 28.285156 11.753906 27.863281 10.542969 27.46875 9.59375 C 27.074219 8.644531 26.824219 7.996094 26.25 7.46875 L 26.21875 7.4375 L 26.1875 7.4375 C 23.628906 5.382813 20.125 5 20.125 5 L 19.34375 4.90625 L 19.0625 5.625 C 19.0625 5.625 18.773438 6.355469 18.59375 7.1875 C 17.460938 7.035156 16.535156 7 16 7 C 15.464844 7 14.539063 7.035156 13.40625 7.1875 C 13.226563 6.355469 12.9375 5.625 12.9375 5.625 Z M 11.28125 7.1875 C 11.324219 7.328125 11.367188 7.449219 11.40625 7.5625 C 10.113281 7.882813 8.734375 8.371094 7.46875 9.15625 L 8.53125 10.84375 C 11.125 9.234375 14.851563 9 16 9 C 17.148438 9 20.875 9.234375 23.46875 10.84375 L 24.53125 9.15625 C 23.265625 8.371094 21.886719 7.882813 20.59375 7.5625 C 20.632813 7.449219 20.675781 7.328125 20.71875 7.1875 C 21.652344 7.375 23.433594 7.804688 24.90625 8.96875 C 24.898438 8.972656 25.28125 9.550781 25.625 10.375 C 25.976563 11.222656 26.367188 12.351563 26.71875 13.625 C 27.394531 16.066406 27.925781 19.039063 27.96875 21.65625 C 27.339844 22.617188 26.171875 23.484375 24.9375 24.0625 C 23.859375 24.566406 23.007813 24.75 22.5 24.84375 L 22 24 C 22.296875 23.890625 22.589844 23.769531 22.84375 23.65625 C 24.382813 22.980469 25.21875 22.25 25.21875 22.25 L 23.90625 20.75 C 23.90625 20.75 23.34375 21.265625 22.03125 21.84375 C 20.71875 22.421875 18.714844 23 16 23 C 13.285156 23 11.28125 22.421875 9.96875 21.84375 C 8.65625 21.265625 8.09375 20.75 8.09375 20.75 L 6.78125 22.25 C 6.78125 22.25 7.617188 22.980469 9.15625 23.65625 C 9.410156 23.769531 9.703125 23.890625 10 24 L 9.5 24.84375 C 8.992188 24.75 8.140625 24.566406 7.0625 24.0625 C 5.828125 23.484375 4.660156 22.617188 4.03125 21.65625 C 4.074219 19.039063 4.605469 16.066406 5.28125 13.625 C 5.632813 12.351563 6.023438 11.222656 6.375 10.375 C 6.71875 9.550781 7.101563 8.972656 7.09375 8.96875 C 8.566406 7.804688 10.347656 7.375 11.28125 7.1875 Z M 12.5 14 C 11.726563 14 11.042969 14.441406 10.625 15 C 10.207031 15.558594 10 16.246094 10 17 C 10 17.753906 10.207031 18.441406 10.625 19 C 11.042969 19.558594 11.726563 20 12.5 20 C 13.273438 20 13.957031 19.558594 14.375 19 C 14.792969 18.441406 15 17.753906 15 17 C 15 16.246094 14.792969 15.558594 14.375 15 C 13.957031 14.441406 13.273438 14 12.5 14 Z M 19.5 14 C 18.726563 14 18.042969 14.441406 17.625 15 C 17.207031 15.558594 17 16.246094 17 17 C 17 17.753906 17.207031 18.441406 17.625 19 C 18.042969 19.558594 18.726563 20 19.5 20 C 20.273438 20 20.957031 19.558594 21.375 19 C 21.792969 18.441406 22 17.753906 22 17 C 22 16.246094 21.792969 15.558594 21.375 15 C 20.957031 14.441406 20.273438 14 19.5 14 Z M 12.5 16 C 12.554688 16 12.625 16.019531 12.75 16.1875 C 12.875 16.355469 13 16.648438 13 17 C 13 17.351563 12.875 17.644531 12.75 17.8125 C 12.625 17.980469 12.554688 18 12.5 18 C 12.445313 18 12.375 17.980469 12.25 17.8125 C 12.125 17.644531 12 17.351563 12 17 C 12 16.648438 12.125 16.355469 12.25 16.1875 C 12.375 16.019531 12.445313 16 12.5 16 Z M 19.5 16 C 19.554688 16 19.625 16.019531 19.75 16.1875 C 19.875 16.355469 20 16.648438 20 17 C 20 17.351563 19.875 17.644531 19.75 17.8125 C 19.625 17.980469 19.554688 18 19.5 18 C 19.445313 18 19.375 17.980469 19.25 17.8125 C 19.125 17.644531 19 17.351563 19 17 C 19 16.648438 19.125 16.355469 19.25 16.1875 C 19.375 16.019531 19.445313 16 19.5 16 Z"></path></g></svg>
                </a>
            </li>
        </ul>
    </div>
</header>